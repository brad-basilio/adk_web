var f=Object.defineProperty;var h=(i,n,s)=>n in i?f(i,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[n]=s;var m=(i,n,s)=>(h(i,typeof n!="symbol"?n+"":n,s),s);import{j as e}from"./FileViewer-DkaHswXt.js";import{r as l}from"./TrackingPixels-B80Lgev0.js";import{c as u}from"./ReactAppend-CY8yKZvG.js";import{B as j}from"./Base-4BtwEV-E.js";import{C as b}from"./CreateReactScript-BEktg6JA.js";import{T as g}from"./Table-Dhu2mzRt.js";import{D as p}from"./DxButton-CsjWvhyj.js";import{R as a}from"./ReactAppend-Yu2UtNlL.js";import{B as N}from"./Results-D258VEiO.js";import{M as R}from"./Modal-CJBbhQ-7.js";import{S as C}from"./sweetalert2.all-C96erxsa.js";import"./index-CbrplguO.js";import"./tippy-react.esm-CIcmk6y-.js";/* empty css              */import"./Logout-CHcSRTk-.js";import"./main-D1ujSG59.js";import"./___vite-browser-external_commonjs-proxy-DjIx6Adb.js";import"./index.esm-Duzu12F9.js";import"./axios-B4uVmeYG.js";import"./useTranslation-BOupZ7-X.js";import"./Filter-BZ5YA63n.js";/* empty css               */class T extends N{constructor(){super(...arguments);m(this,"path","admin/messages")}}const o=new T,w=()=>{const i=l.useRef(),n=l.useRef(),[s,d]=l.useState(null),x=async t=>{const{isConfirmed:r}=await C.fire({title:"Eliminar mensaje",text:"¿Estas seguro de eliminar este mensaje?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});!r||!await o.delete(t)||$(i.current).dxDataGrid("instance").refresh()},c=t=>{t.seen||(o.boolean({id:t,field:"seen",value:!0}),$(i.current).dxDataGrid("instance").refresh()),d(t),$(n.current).modal("show")};return e.jsxs(e.Fragment,{children:[e.jsx(g,{gridRef:i,title:"Mensajes",rest:o,toolBar:t=>{t.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(i.current).dxDataGrid("instance").refresh()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"name",caption:"Nombre",cellTemplate:(t,{data:r})=>{a(t,e.jsx("span",{style:{width:"100%",fontWeight:r.seen?"lighter":"bold",cursor:"pointer"},onClick:()=>c(r),children:r.name}))}},{dataField:"email",caption:"Correo"},{dataField:"phone",caption:"Teléfono"},{dataField:"subject",caption:"Asunto",cellTemplate:(t,{data:r})=>{a(t,e.jsx("span",{children:r.subject||e.jsx("i",{className:"text-muted",children:"- Sin asunto -"})}))}},{dataField:"created_at",caption:"Fecha",dataType:"datetime",format:"yyyy-MM-dd HH:mm:ss",sortOrder:"desc"},{dataField:"status",caption:"Estado",dataType:"boolean",cellTemplate:(t,{data:r})=>{r.seen?a(t,e.jsx("span",{className:"badge bg-success rounded-pill",children:"Leído"})):a(t,e.jsx("span",{className:"badge bg-danger rounded-pill",children:"No leído"}))}},{caption:"Acciones",cellTemplate:(t,{data:r})=>{t.append(p({className:"btn btn-xs btn-soft-dark",title:"Ver mensaje",icon:"fa fa-eye",onClick:()=>c(r)})),t.append(p({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>x(r.id)}))},allowFiltering:!1,allowExporting:!1}]}),e.jsxs(R,{modalRef:n,title:"Mensaje",hideFooter:!0,children:[e.jsxs("p",{children:[e.jsx("b",{children:"Nombre"}),":",e.jsx("span",{className:"ms-1",children:s==null?void 0:s.name})]}),e.jsxs("p",{children:[e.jsx("b",{children:"Correo"}),":",e.jsx("span",{className:"ms-1",children:(s==null?void 0:s.email)||e.jsx("i",{className:"text-muted",children:"- Sin correo -"})})]}),e.jsxs("p",{children:[e.jsx("b",{children:"Telefono"}),":",e.jsx("span",{className:"ms-1",children:s==null?void 0:s.phone})]}),e.jsxs("p",{children:[e.jsx("b",{children:"Asunto"}),":",e.jsx("span",{className:"ms-1",children:(s==null?void 0:s.subject)||e.jsx("i",{className:"text-muted",children:"- Sin asunto -"})})]}),e.jsxs("p",{children:[e.jsx("b",{children:"Mensaje"}),":",e.jsx("span",{className:"ms-1",children:s==null?void 0:s.description})]})]})]})};b((i,n)=>{u(i).render(e.jsx(j,{...n,title:"Mensajes",children:e.jsx(w,{...n})}))});
